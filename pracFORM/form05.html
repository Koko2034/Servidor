
<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Formulario</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript" src="../js/jquery-3.1.0.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">        
        <script>
            $(function () {
                $("#txtFecNac").datepicker({
                    dateFormat: 'dd/mm/yy',
                    changeMonth: true,
                    changeYear: true,
                    yearRange: '1900:2015'
                });
            });
        </script>
    </head>
    <style>
        fieldset{
            width: 400px;
        }
        legend{
            font-size: 20px;
        }
        label{
            text-align: right;
            float: left;
        }
        input.textbox-300{
            width: 200px;
            float: left;
        }
        fieldset p{
            clear: both;
        }
        #prevFoto {
            float: none;
            left: 320px;
            position: absolute;
            top: 425px;
        }
    </style>
    <body>
        <div id="divForm">
            <form enctype="multipart/form-data" id="formDatos" action="form05.php">
                <fieldset>
                    <legend>Formulario de recogida de datos</legend>
                    <p><label>Nombre:</label><br>
                        <input type="text" name="txtNombre"></p>
                    <p><label>Edad:</label><br>
                        <input type="text" name="txtEdad"></p>
                    <p><label>Afición:</label><br>
                        <select name="selAficion">
                            <option>Selecciona...</option>
                            <option>Fútbol</option>
                            <option>Videojuegos</option>
                            <option>Viajar</option>
                        </select></p>
                    <p><label>Sexo:</label><br>
                        <input type="radio" name="rdaSexo" value="Hombre">Hombre
                        <input type="radio" name="rdaSexo" value="Mujer">Mujer
                        <input type="radio" name="rdaSexo" value="No contesta" checked>No contesta</p>
                    <p><label>Fecha de Nacimiento:</label><br>
                        <input type="text" id="txtFecNac" name="txtFecNac"></p>
                    <p><label>Info: </label>
                        <input type="radio" name="rdaInfo" value="Sí">Sí
                        <input type="radio" name="rdaInfo" value="No" checked>No
                    <p><label>Comentarios:</label><br>
                        <input type="text" name="txtComentarios"></p>
                    <p><label>Foto:</label><br>
                        <input type="file" id="ficFoto" accept=".jpg, .jpeg, .png" name="ficFoto"></p>
                    <img id="prevFoto" alt="" width="100" height="100" />
                    <p><label>Curriculum:</label><br>
                        <input type="file" name="ficCV"></p>
                    <input type="submit" name="butEnviar">
                </fieldset>
            </form>
        </div>
        <div id="divDatos"></div>
    </body>
    <script>
        $("#ficFoto").change(function () {
            $('#prevFoto')[0].src = window.URL.createObjectURL(this.files[0]);
        });
        var form = $('#formDatos');
        form.submit(function (event) {
            //disable the default form submission
            event.preventDefault();
            //grab all form data  
            var formData = new FormData($(this)[0]);
            formData.append('control', '101');
            $.ajax({
                url: form.attr('action'),
                type: 'POST',
                data: formData,
                async: false,
                cache: false,
                contentType: false,
                processData: false,
                success: function (returndata) {
                    returndata=JSON.parse(returndata);
                    $('#divDatos').html(returndata);
                }
            });
        });
    </script>
</html>
